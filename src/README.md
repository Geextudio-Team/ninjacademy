The main code of this project.